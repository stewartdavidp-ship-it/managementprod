Command Center ‚Äî Release Notes
================================

v8.43.0 ‚Äî Unified Plan Phase 5.1‚Äì5.3: Work Streams, Decoupling, Unified Model
--------------------------------------------------------------------------------
Phase 5 begins! Command Center gains work streams ‚Äî named, owned, parallel
tracks of work that let different people run AI sessions against different
parts of a product without stepping on each other.

WORK STREAMS (Phase 5.2):
- Create named streams per app (e.g. "Core Gameplay", "Help & Onboarding")
- Each stream has an owner, goal, status, and target release
- Stream board view shows completion bars, active items, and dependencies
- Streams can be blocked by other streams for coordination
- Stream filter in Claude Prep lets you focus session packages on one stream

UNIFIED WORK ITEM MODEL (Phase 5.3):
- Work items can now be assigned to streams via new streamId field
- Stream selector appears in the work item edit modal when app has streams
- Backlog supports "Group by Stream" view
- Stream badges appear on items in backlog list
- Session briefs include stream context when items share a stream

DECOUPLE FROM GAME SHELF (Phase 5.1):
- Skills recommendations now project-aware ‚Äî gs-active and gs-logos only
  recommended for Game Shelf project apps, not universally
- Categories are extensible via config.customCategories
- Platform recommendation text genericized

DEPENDENCY INFRASTRUCTURE (Phase 5.4 foundation):
- StreamInterfaceService: streams declare what they PROVIDE
- DependencyService: streams declare what they CONSUME
- Interfaces and dependencies shown on stream cards
- Full auto-remediation flow coming in next session

REMAINING Phase 5 work (5.4‚Äì5.7):
- Dependencies auto-remediation with prompt chaining
- Product Brief auto-generation
- Activity Feed multi-person view
- Multi-Person Access via Firebase Auth

---

v8.42.0 ‚Äî Unified Plan Phase 4.4‚Äì4.5: Release Coordination + Test Checklist
--------------------------------------------------------------
Completes Phase 4 of the Unified Development Plan. Command Center 
now answers "Is this version ready to ship?" with per-app release 
readiness tracking and auto-generated test checklists.

RELEASE COORDINATION VIEW: New "Releases" view under the Backlog 
navigation group. Shows every configured app with a readiness 
assessment ‚Äî Ready to Ship, Almost Ready, Blocked, In Progress ‚Äî 
based on work item pipeline status, stale items, and pending 
sessions. Summary cards show counts across all apps.

PER-APP RELEASE CARDS: Each app shows current test/prod versions 
with drift detection ("Test ahead of Prod"), a pipeline completion 
bar with item counts per stage, and a blockers panel highlighting 
what's preventing a ship decision. Milestone breakdown and recent 
deploys are available via expandable sections.

GO/NO-GO SUMMARY: Apps at 100% completion show a green "Ready to 
ship" banner with a direct link to Smart Deploy. Apps above 80% 
show an "Almost ready" amber indicator with remaining item count.

RELEASE TEST CHECKLIST (Phase 4.5): Click "Test Checklist" on any 
app to get an auto-generated manual testing guide built from:
- Recently shipped work items with their acceptance criteria
- Items pending review with verification prompts
- Standard user journeys based on app category (game, tool, 
  dashboard, content, admin)
- Regression checks from recent session deliverables
- Deploy verification including PWA-specific service worker checks

Interactive checklist with progress tracking ‚Äî check off items as 
you test, see completion percentage, and get a deploy prompt when 
all checks pass. Designed for 10-15 minutes per release.

Phase 4 complete. All sub-phases delivered:
  4.1 ‚úÖ Dashboard Redesign ‚Äî Product Health metrics (v8.41.0)
  4.2 ‚úÖ Quick Actions Alignment (v8.41.0)
  4.3 ‚úÖ Progressive Disclosure (v8.41.0)
  4.4 ‚úÖ Release Coordination View (v8.42.0)
  4.5 ‚úÖ Release Test Checklist (v8.42.0)

Next: Phase 5 ‚Äî Generalize (Work Streams, Dependencies, 
Multi-Person). CC becomes a coordination platform for AI-native 
product development.

v8.41.0 ‚Äî Unified Plan Phase 4: Dashboard Polish (4.1‚Äì4.3)
--------------------------------------------------------------
The dashboard now answers "How is my product doing?" instead of 
"What did I deploy?" This is the first session of Phase 4 from 
the Unified Development Plan.

PRODUCT HEALTH DASHBOARD: The sidebar now leads with four product 
metrics ‚Äî Features Shipped (last 30 days), Pipeline count (active 
work items), Session-Ready apps (apps with ready items and 
acceptance criteria), and Cost per Feature. Hover any metric card 
to see a detailed breakdown via progressive disclosure tooltips.

SMART QUICK ACTIONS: The sidebar actions are now aligned to the 
product workflow ‚Äî Start Session automatically targets the app with 
the most ready items, Add Idea goes straight to the backlog, 
Review Session shows when sessions are pending, and Smart Deploy 
is one click away.

PIPELINE HEALTH: A horizontal status bar shows the proportion of 
items in each stage (Idea/Ready/WIP/Review) with the top 5 active 
work items listed below.

RECENT ACTIVITY: Activity events from the audit log now appear in 
the sidebar with action icons and relative timestamps.

PROGRESSIVE DISCLOSURE: App Pipeline details, Issues, and Recently 
Shipped items are now collapsed by default into expandable sections 
‚Äî visible when you need them, out of the way when you don't.

PORTFOLIO ENHANCED: Features Shipped added as the first stat card 
in the Portfolio view, respecting the time range filter.

Remaining Phase 4 work: 4.4 Release Coordination View and 
4.5 Release Test Checklist will be built in subsequent sessions.

v8.40.0 ‚Äî Phase 3: Close the Loop, Session 2
-------------------------------------------------
Work Item Lifecycle Automation: Work items now flow through a full 
lifecycle with intelligent auto-suggestions at each transition.

New "review" status sits between in-progress and done. When you start 
a Post-Session Review, linked work items automatically move to "review". 
When you deploy and close items, they move review ‚Üí done with proper 
activity logging.

Adding acceptance criteria to an idea-status item triggers a prompt: 
"Promote to Ready?" ‚Äî so items don't sit as ideas after they've been 
specified.

Stale items (7+ days in-progress or review) now show a red "‚ö† Nd stale" 
badge directly on work item rows in the Backlog, making it immediately 
visible which items are stuck.

The deploy completion dialog now catches both in-progress AND review 
items, showing their current status so you know what you're completing.

Full lifecycle: Idea ‚Üí Ready (criteria added) ‚Üí In Progress (session 
started) ‚Üí Review (session reviewed) ‚Üí Done (deployed & confirmed).

Phase 3 status: Complete. All four sub-phases delivered:
  3.1 ‚úÖ Post-Session Review Flow (v8.39.0)
  3.2 ‚úÖ Session-Deploy-WorkItem Linking (v8.27.0)  
  3.3 ‚úÖ Work Item Lifecycle Automation (v8.40.0)
  3.4 ‚úÖ Activity Logging (v8.39.0)

v8.39.0 ‚Äî Phase 3: Close the Loop, Session 1
-------------------------------------------------
Post-Session Review Flow: After returning from a Claude session, you can now 
review what was built through a guided 4-step flow ‚Äî summarize deliverables, 
verify acceptance criteria, make a deploy decision, and close work items. 
Accessible from the Session History tab via "Review Session" buttons.

Activity Logging: All meaningful actions (deploys, session creation, reviews, 
work item transitions) now write to a persistent activity log. Foundation for 
the Phase 5 activity feed.

Session pipeline now shows: Prep ‚Üí Review ‚Üí Deploy instead of just Prep ‚Üí Deploy.

v8.38.0 ‚Äî Phase 2: Rewrite (PM-First Language), Session 1
-------------------------------------------------
Rewrites what Command Center says without changing what it does.
Every scoping question, label, and wizard header now speaks product
manager, not developer. Critical for making CC usable by someone
who didn't build it.

Scoping questions rewritten (all 5 categories):
- Game: "Daily puzzle / reset mechanic?" ‚Üí "Does the game reset
  daily with a new puzzle?"
- Tool: "Data persistence?" ‚Üí "Should data save between sessions?"
  with options "No / On this device / Synced across devices"
- Tool: "Multi-item management?" ‚Üí "Work with a list of items or
  a single item?" (now a dropdown, not just a toggle)
- Dashboard: "Data sources?" ‚Üí "Where does the data come from?"
  with labels "Database / External service / Browser storage / User input"
- Content: "Static or dynamic?" ‚Üí "Does the content change?"
- Admin: "CRUD operations?" ‚Üí "Can users create, edit, and delete records?"

Redundant questions removed:
- tool.settingsPersistence ‚Äî redundant with dataPersistence
- dashboard.autoRefresh + realtime ‚Äî merged into "How should data
  stay current?" (Manual / Periodic / Live)

Labels updated:
- "V1 Features" ‚Üí "Launch Features" (scoping + generated docs)
- "Core" priority ‚Üí "Must have" (work items)
- "Out of Scope" ‚Üí removed from work item modal; kept in scoping
  as "Not now" for feature triage only
- "Session (1-2 hrs)" ‚Üí "Session (1‚Äì2 hrs, one Claude chat)"
- "Environment Optimization" ‚Üí "Setup Guide" (nav + page title)
- Engine cost table shows ~$/Session instead of $/MTok

Outcome statements added:
- Scoping: "Define what to build ‚Üí get a prioritized feature list
  and work items ready for Claude."
- Session Step 1: "Build a Claude briefing package. Select work
  items to focus on."
- Session Step 2: "This shapes Claude's approach and the files
  included."
- Session Step 3: "Generate a zip package with source, docs, and
  a session brief to upload to Claude."

Acceptance criteria coaching:
- Placeholder now reads: "What should a user see or be able to do?
  e.g. 'Score updates immediately after each guess, displayed as ‚òÖ 450'"
- Label hint: "describe what a user should experience"

---

v8.37.0 ‚Äî Phase 1: Clean (Remove & Simplify)
-------------------------------------------------
First phase of the Unified Development Plan. Removes clutter, merges
steps, hides implementation details. No new features, no architecture
changes ‚Äî just making CC leaner and easier to use.

Scoping wizard (4 steps ‚Üí 3):
- Removed Step 4 (Standards Checkboxes) entirely. Standards are now
  auto-assembled silently based on category and answers, then baked
  into CLAUDE_INSTRUCTIONS.md during package generation. Users never
  see or manage individual standards.
- "Drives" text on scoping questions replaced with hover-only ‚ìò icon
  tooltip. Implementation details hidden unless you want them.
- Removed "these drive feature pre-population & starting standards"
  header from Step 2.

Session wizard (4 steps ‚Üí 3):
- Merged Context Budget Preview (old Step 3) into Session Type (Step 2)
  as a collapsible "What Claude will see" panel.
- Replaced token budget bar ("53.3K / 160.0K tokens") with confidence
  indicator: "Package fits ‚Äî Claude will see everything needed."
- File manifest collapsed by default ‚Äî open only if you want details.
- Generate step renumbered from Step 4 to Step 3.

Quick Build bypass:
- When session wizard opens with 0 work items, shows one-screen Quick
  Build summary instead of making you click through empty steps.
- One-click Generate Package from the summary view.
- "Skip wizard ‚Äî Quick package" still available when work items exist.

Your Name (Settings):
- New "Your Name" field in Settings (first section, above GitHub Token).
- Persists to both localStorage config and Firebase sync.
- Seeds `created_by` / `scopedBy` on all new records (work items,
  scopes). Defaults to "Owner" when blank.
- Foundation for multi-person access in Phase 5.

---

v8.36.5 ‚Äî Storage Management
-------------------------------------------------
Adds intelligent localStorage cleanup to prevent QuotaExceededError
that was spamming the console on every state update.

Key additions:
- StorageManager with priority-based cleanup: caches first, then old
  rollback snapshots, then trim deploy history (100‚Üí30), session logs
- Auto-cleanup on quota error: services now use safeSet() which
  triggers smart cleanup, then aggressive cleanup if still full
- Rollback snapshots pruned by age (7 days default, 24h aggressive),
  then content stripped from old entries keeping metadata
- Settings > Local Storage panel: usage bar, per-key breakdown sorted
  by size, Smart Cleanup and Aggressive Cleanup buttons
- Protected keys (token, config, app state) never pruned

---

v8.36.3 ‚Äî Deploy Safety & Smart Targeting
-------------------------------------------------
Fixes critical gap where version validation was skipped for single-file
deploys and small packages. Adds intelligent deploy target selection.

Key fixes:
- Version downgrade protection now covers ALL deploy types, not just
  full packages. Previously a single index.html drop bypassed all
  version checks entirely
- Downgrades (older version) show red error panel; same-version shows
  amber warning ‚Äî previously neither showed anything
- Deploy dropdown intelligently defaults: two-repo apps start at TEST,
  prod-only apps (Firebase Functions, Quotle-info, etc.) start at PROD
- Target dropdown only shows valid environments for the selected app
- Post-deploy reset uses smart default instead of always flipping to TEST
- Better version extraction for renamed files and single-file scenarios

---

v8.36.0 ‚Äî Unified Package Validation Engine
-------------------------------------------------
Complete overhaul of deploy-time validation. Replaces 4 separate
validation mechanisms (post-extraction alerts, doc validation banner,
deploy-time confirms, version warning modal) with a single
selection-driven system.

Key changes:
- Intent detection: CC analyzes what you selected (quick deploy,
  targeted update, full package, etc.) and only runs relevant checks
- Inline validation panel: grey/amber/red severity tiers inside deploy
  controls. No more modal popups interrupting the flow
- Version bump in CC: code-only deploys get a bump button right in the
  panel. One click updates all version strings in index.html + sw.js
- Full packages with docs: sends everything back to Claude via copyable
  fix prompt. Claude bumps version AND updates docs together
- Deploy button state: disabled on errors (with override checkbox),
  amber on warnings, normal when clean
- Removed: validateDocPackage, extraction-time showAlerts, deploy-time
  showConfirm dialogs, VersionWarningModal trigger, per-file doc
  version indicators

v8.35.0 ‚Äî App Files Improvements
-------------------------------------------------
Maintain ‚Üí Files view reworked for app-centric browsing:

- App-based dropdown: shows apps by name with PROD/TEST, not raw repo names
- SubPath-aware: Game Shelf shows app/ contents, Landing shows root
- Expandable folders: click üìÅ to expand and see files inside
- Download Package: correctly scoped to app subPath with clean zip paths
- Version Audit: finds correct index.html per app subPath
- Shared repo support: apps on same repo (Game Shelf, Quotle, Slate, etc.)
  are each individually selectable

v8.34.0 ‚Äî Cleanup Guardrails
-------------------------------------------------
Prevents stale file cleanup from deleting critical CI/CD files:

- Globally protected paths: .github/, package.json, firebase.json,
  .firebaserc, .gitignore, LICENSE, README.md never flagged as stale
- Firebase-functions package type: gameshelf-functions repo now correctly
  recognized (functions/, .github/, config files treated as expected)
- Critical file delete warning: extra confirmation dialog with file names
  when selecting workflow, config, or build files for deletion
- getAppType() recognizes firebase-functions and gameshelf-functions repos
- isBaseFile() checks GLOBALLY_PROTECTED_PATHS before package rules

v8.33.0 ‚Äî Multi-Provider Domains + Firebase CORS Proxy
-------------------------------------------------
Multi-registrar support and CORS fix for domain management:

Multi-Provider Architecture:
- GoDaddyService: REST API wrapper with sso-key auth, record delete via
  replace-all-minus-one (GoDaddy has no individual record delete)
- DomainProviderRegistry: aggregates domains from all configured registrars,
  routes DNS operations to correct service per domain
- Extensible: new providers = service module + registry entry

Settings UI:
- Provider tabs (üê∑ Porkbun / üü¢ GoDaddy) with dynamic key fields
- ProviderConfigPanel: reusable component adapts to any provider
- Connection test, domain list, expiry/auto-renew per provider

DomainsView Updates:
- Domain pills show provider icons
- DNS operations route to correct provider automatically
- GitHub Pages wiring works with any provider

Firebase CORS Proxy:
- domainProxy Cloud Function added to functions/index.js (v2.5.0)
- PorkbunService and GoDaddyService route through proxy
- Stateless ‚Äî API keys sent per-request, not stored in function
- Whitelisted to porkbun.com and godaddy.com only
- Fixes: "Preflight response is not successful. Status code: 400"

Deploy: Push index.js to gameshelf-functions repo first, then deploy CC.

---

v8.32.0 ‚Äî Domain Manager Session 1: Multi-Provider DNS Management
-------------------------------------------------
New domain management with multi-registrar support:

Provider Architecture:
- DomainProviderRegistry: abstraction layer that aggregates domains from 
  all configured registrars (Porkbun + GoDaddy) into a unified interface
- Each provider implements: ping, listDomains, listDNSRecords, 
  createDNSRecord, deleteDNSRecord, configureForGitHubPages
- Provider-aware: DNS operations route to the correct API per domain
- Extensible: new providers just need a service module + registry entry

Service Modules:
- PorkbunService: POST-based JSON API, individual record delete by ID
- GoDaddyService: REST API with sso-key auth header, record delete via 
  replace-all-minus-one (GoDaddy has no individual record delete)

DNS Management (Monitor ‚Üí Domains):
- Multi-provider domain selector with provider icons (üê∑/üü¢)
- DNS records table with colored type badges (A, CNAME, MX, TXT, etc.)
- Add/delete records ‚Äî routed to correct provider automatically
- GitHub Pages detection badge per domain

One-Click GitHub Pages Wiring (works with ANY provider):
- 3-step: DNS config ‚Üí CNAME commit ‚Üí GitHub Pages API update
- Provider-aware logging in progress panel

Settings (Configure ‚Üí Settings ‚Üí Domain Registrar):
- Provider tabs: switch between Porkbun and GoDaddy
- Dynamic key fields per provider (Porkbun: apiKey+secretApiKey, GoDaddy: apiKey+apiSecret)
- Connection test, domain list, expiry dates, auto-renew status
- Provider-specific setup notes (e.g., GoDaddy 10+ domain requirement)

v8.31.0 ‚Äî Environment Optimization Guide (Phase 4.2) ‚Äî ORCHESTRATOR COMPLETE
-------------------------------------------------
New Environment Optimization view under Monitor ‚Üí Optimize with per-app Claude Project
setup guides, completing the full orchestrator project plan (Phases 0‚Äì4).

Per-App Guide:
- Doc classification: persistent docs (Project Knowledge) vs session docs (upload each time)
- Token savings calculator: estimates monthly savings from using Project Knowledge
- Project Instructions generator: copy-paste-ready Custom Instructions from app metadata
- Skills recommendations: category-driven, with relevance badges and reasoning
- Platform feature recommendations: Projects, Skills, Artifacts, Memory, Thinking, Computer Use, Search
- 6-step setup checklist for creating a Claude Project per app

Overview (no app selected):
- Session type quick reference table: all 8 types with engines and platform tips
- Platform feature guide: universal recommendations for the selected AI engine

Bug fix: Added missing "üìä Portfolio" dropdown label from Phase 4.1.

v8.30.0 ‚Äî Portfolio View + Cost Tracking (Phase 4.1)
-------------------------------------------------
New Portfolio view under Monitor with full cross-app analytics:
- Maturity distribution bar chart showing seed/prototype/alpha/beta/production breakdown
- Backlog health panel with status bars, aging item alerts, and per-app open item counts
- Session velocity metrics: total, per-week average, type mix, sessions by app with cost
- Deploy activity: test/prod split, weekly volume sparkline, deploys by app
- Cost breakdown table: per-app estimated cost from token counts √ó engine pricing
- App status overview table: maturity, target, open WIs, sessions, deploys, prod version
- Time range filter (7d/30d/90d/All Time) for sessions and deploy metrics
- Maturity badges on Dashboard app cards (colored by stage)

v8.29.3 ‚Äî Firebase Admin Fix + Deploy UX
-------------------------------------------------
Date: February 9, 2026

Fixes Firebase RTDB rules authentication (was returning 401) and improves single-file
deploy experience.

FIXES:
‚Ä¢ Firebase RTDB rules check now works ‚Äî added missing `userinfo.email` OAuth scope
‚Ä¢ Reverted rules API to use `?access_token=` query param (Bearer not supported on this endpoint)
‚Ä¢ Console startup log now shows actual version instead of hardcoded v8.19.0

IMPROVEMENTS:
‚Ä¢ Doc package validation no longer warns about missing docs when deploying a single HTML file

v8.29.0 ‚Äî Smart Artifact Generation (Phase 3.2)
-------------------------------------------------
Date: February 9, 2026

Generated artifacts now start the project at v0.7 instead of v0.1. When you create a new
app with scoping, CC generates a full set of project docs, commits them to the repo, and
deploys the seed to test ‚Äî so the first Claude session can start building immediately.

GENERATED DOCS (5 artifacts):
‚Ä¢ CLAUDE_INSTRUCTIONS.md ‚Äî Full standards profile, V1 features, architecture constraints
  (already existed in 8.28.0, now committed to repo)
‚Ä¢ CONTEXT.md ‚Äî Pre-populated with architecture, data schema stubs, deploy info,
  conventions. No TODO placeholders for fields captured during scoping.
‚Ä¢ PROJECT_PLAN.md ‚Äî Mission, Phase 1 features as checkbox list, architecture decisions
  from category answers, open questions from unresolved decisions
‚Ä¢ CHANGELOG.md ‚Äî Skeleton with v0.1.0 seed entry
‚Ä¢ RELEASE_NOTES.txt ‚Äî Skeleton with v0.1.0 seed entry

REPO COMMITS:
‚Ä¢ All 5 docs committed to prod repo via GitHub API after generation
‚Ä¢ Respects subPath for consolidated repos (e.g. gameshelf/{app}/docs/)
‚Ä¢ Skips files that already exist (safe for re-runs)

AUTO-DEPLOY SEED TO TEST:
‚Ä¢ For test-prod apps, seed index.html is deployed to test environment
‚Ä¢ Skips if test already has an index.html

TABBED DOC VIEWER:
‚Ä¢ Step 5 Review & Launch now shows all generated docs in a tabbed viewer
‚Ä¢ Copy button works per-tab for each document
‚Ä¢ Status shows docs committed count and seed deploy success

CONTEXT.md GENERATOR:
‚Ä¢ Architecture section: framework, data layer, PWA status, deploy target
‚Ä¢ Data schema: Firebase path stubs from category/answers, localStorage keys
‚Ä¢ Deployment: repos, structure, deploy type, CC integration
‚Ä¢ Conventions: auto-derived from starting standards and category

PROJECT_PLAN.md GENERATOR:
‚Ä¢ Mission from scope description
‚Ä¢ Phase 1 features from V1 core list (as checkboxes)
‚Ä¢ Phase 2 features from nice-to-have list
‚Ä¢ Future/ideas from future features
‚Ä¢ Architecture decisions from category answers and ecosystem conventions
‚Ä¢ Open questions from unresolved key decisions

v8.28.0 ‚Äî Integrated Setup Flow (Phase 3.1)
---------------------------------------------
Date: February 9, 2026

Enhances the Setup New App wizard so new apps launch with full context from day one.
Scoping now feeds directly into lifecycle metadata, backlog work items, and Claude
instructions ‚Äî closing the gap between "I have an idea" and "Claude can build it."

SETUP WIZARD RESTRUCTURED:
‚Ä¢ Step 5 renamed from "Claude Prompt" to "Review & Launch"
‚Ä¢ Review & Launch shows a complete setup summary: app details, repos, scope category,
  feature/standards counts, generated artifacts, and created work items

LIFECYCLE METADATA FROM SCOPE:
‚Ä¢ When scope is completed during setup, lifecycle metadata is stored on the app config
‚Ä¢ Includes: currentMaturity (seed), complexity (auto-detected), full scope object
‚Ä¢ Scope data includes description, category, categoryAnswers, features, standards,
  key decisions, and timestamp

AUTO-CREATE WORK ITEMS FROM SCOPE:
‚Ä¢ V1 features ‚Üí work items (type: feature, status: ready, source: scoped)
‚Ä¢ Future features ‚Üí work items (type: feature, status: idea, source: scoped)
‚Ä¢ Unresolved key decisions ‚Üí work items (type: research, status: ready, source: scoped)
‚Ä¢ Uses WorkItemService.createBatch() for efficient Firebase writes
‚Ä¢ Work items appear immediately in Backlog view
‚Ä¢ Requires Firebase sign-in (graceful skip with warning if not signed in)

REVIEW & LAUNCH STEP:
‚Ä¢ 4-panel summary grid: app identity, repositories, scope overview, generated artifacts
‚Ä¢ Work items table with status, type, title, and priority badges
‚Ä¢ Claude instructions/prompt with copy button
‚Ä¢ "Setup Another App" resets all state including new fields

TECHNICAL:
‚Ä¢ firebaseUid prop now passed to SetupNewAppView
‚Ä¢ New state: workItemsCreated, reviewData
‚Ä¢ setupApp() enhanced with lifecycle storage, batch work item creation, review data build

v8.27.0 ‚Äî Session Tracking + Deploy Close-the-Loop (Phase 2.3)
---------------------------------------------------------------
Date: February 9, 2026

Closes the prep ‚Üí deploy cycle. CC now knows when a session started (prep package)
and when it ended (deploy), and connects the dots automatically.

DEPLOY WORK ITEM COMPLETION:
‚Ä¢ After a successful deploy, if there are in-progress work items for that app,
  CC shows a completion dialog: "Mark these as done?"
‚Ä¢ Confirming updates work items to "done" with completedInVersion set
‚Ä¢ Works alongside existing issue-linking (issues first, then work items)

SESSION ‚Üí DEPLOY LINKING:
‚Ä¢ Active (prep-status) sessions are automatically linked to deploys
‚Ä¢ Session status transitions from "prep" to "completed" on deploy
‚Ä¢ Deploy record enriched with sessionId, sessionType, workItemsCompleted

SESSION HISTORY VIEW:
‚Ä¢ New "Session History" sub-tab on the Session Log page
‚Ä¢ Tab toggle between "Session Log" (existing) and "Session History" (new)
‚Ä¢ Stats row: total sessions, completed (deployed), active/prep
‚Ä¢ Filter by app and session type
‚Ä¢ Expandable session cards showing:
  - Prep ‚Üí Deploy flow visualization
  - Session ID, token budget, engine, duration
  - Package files list
  - Linked work items with status
  - Notes

DEPLOY HISTORY ENRICHMENT:
‚Ä¢ HistoryView now shows linked session type and completed work items
‚Ä¢ Work item badges appear on deploys that completed items

INFRASTRUCTURE:
‚Ä¢ globalSessions state at App level with SessionService.listen()
‚Ä¢ SessionService and WorkItemService fully wired into deploy flow

v8.26.0 ‚Äî Claude Session Wizard (Phase 2.2)
--------------------------------------------
Date: February 9, 2026

Claude Prep is now a 4-step wizard that guides you through building a targeted session
package instead of a one-click dump.

WIZARD STEPS:
‚Ä¢ Step 1: What are you working on? ‚Äî Select work items from backlog or go general
‚Ä¢ Step 2: Session Type ‚Äî Auto-suggested from work item, shows role/scope/delivery
‚Ä¢ Step 3: Context Budget ‚Äî Preview which files will be included based on session type
‚Ä¢ Step 4: Generate ‚Äî Review summary, then generate package

NEW BEHAVIORS:
‚Ä¢ Work items with status "ready" auto-transition to "in-progress" when you generate
‚Ä¢ A session record is created in Firebase tracking what you're working on
‚Ä¢ Files are filtered based on session type (e.g., Fix sessions skip CHANGELOG)
‚Ä¢ "Skip wizard ‚Äî Quick package" on Step 1 preserves the fast path

UNDER THE HOOD:
‚Ä¢ firebaseUid prop now threaded through to ClaudePrepModal for Firebase writes
‚Ä¢ CLAUDE-PREP-STANDARD.md treated as optional during doc fetch

v8.25.0 ‚Äî 2026-02-09
--------------------
Orchestrator Phase 2.1: Session Types + Enhanced Brief Generator.

SESSION TYPES (NEW):
‚Ä¢ 8 session type definitions: Build, Design, Fix, Test, Research, Review, Polish, Document
‚Ä¢ Each type has: description, suggested engine, role frame, scope rules, delivery requirements
‚Ä¢ Context strategy per type: which files to always include, prefer, or skip when tight on budget
‚Ä¢ Auto-suggest from work item type (bugfix‚ÜíFix, feature‚ÜíBuild, research‚ÜíDesign)

SESSION BRIEF GENERATOR (NEW):
‚Ä¢ SessionBriefGenerator module replaces old generateSessionBrief() function
‚Ä¢ Session-type-aware briefs include role frame, scope rules, delivery requirements
‚Ä¢ Target work item details: acceptance criteria, files affected, dependencies, notes
‚Ä¢ Other open work items summary table for awareness
‚Ä¢ Maturity context section (current + target quality level)
‚Ä¢ Old function preserved as thin wrapper for backward compatibility

CLAUDE PREP ENHANCED:
‚Ä¢ New configure phase before building: pick session type + target work items
‚Ä¢ Session type grid selector with 8 types, descriptions, and suggested engines
‚Ä¢ Work item targeting: checkbox list of open items for the selected app
‚Ä¢ Context strategy preview: shows always/prefer/skip files for session type
‚Ä¢ "Skip ‚Äî Quick package" option for fast builds without configuration
‚Ä¢ Back button on error to return to configuration

SETTINGS ENHANCED:
‚Ä¢ Session type ‚Üí engine recommendation grid now shows icons and descriptions from SESSION_TYPES

v8.24.0 ‚Äî 2026-02-09
--------------------
Orchestrator Phase 1.3: CLAUDE_INSTRUCTIONS.md + Issue Promotion.

CLAUDE_INSTRUCTIONS.MD GENERATOR (NEW):
‚Ä¢ generateClaudeInstructions() produces structured AI briefing from project scope
‚Ä¢ Renders as requirement statements: Project Identity, V1 Scope, Starting Standards, Key Decisions, Architecture Constraints, Session Protocol
‚Ä¢ 38 standard descriptions (requirement-style text for each universal + category standard)
‚Ä¢ Standards grouped by category with full descriptive text
‚Ä¢ Out-of-scope features explicitly listed to prevent scope creep
‚Ä¢ Firebase config included when Firebase standards are selected

CLAUDE PREP INTEGRATION:
‚Ä¢ CLAUDE_INSTRUCTIONS.md added to standard doc list (7 docs now)
‚Ä¢ Auto-generated from scope data when packaging (if not already in repo)
‚Ä¢ Treated as optional ‚Äî no "missing doc" warning for apps without scope
‚Ä¢ Setup wizard generates CLAUDE_INSTRUCTIONS.md instead of generic prompt when scope available

ISSUE ‚Üí WORK ITEM PROMOTION (NEW):
‚Ä¢ "Promote to Work Item" button (üìã) on each issue in IssuesView
‚Ä¢ Quick promote button in status bar for open/in-progress issues
‚Ä¢ Maps issue severity to work item priority (critical/major ‚Üí core, minor/cosmetic ‚Üí nice-to-have)
‚Ä¢ Pre-fills description with steps to reproduce, expected/actual behavior
‚Ä¢ Sets type: bugfix, source: promoted, links via tags and relatedItems
‚Ä¢ Duplicate detection ‚Äî warns if issue already promoted
‚Ä¢ Issue back-link: promotedTo field + visual "üìã ‚Üí WI-NNN" indicator

v8.23.0 ‚Äî 2026-02-09
--------------------
Orchestrator Phase 1.2: Project Scoping Flow.

PROJECT SCOPING MODAL (NEW):
‚Ä¢ 4-step scoping wizard: Describe ‚Üí Clarify ‚Üí Features ‚Üí Standards
‚Ä¢ Category-driven questions for 5 app types: Game, Tool, Dashboard, Content, Admin
‚Ä¢ Each category has tailored toggle/select/text questions with sensible defaults
‚Ä¢ Questions drive feature pre-population and starting standards selection
‚Ä¢ No AI dependency ‚Äî works fully without API key

FEATURE PRE-POPULATION:
‚Ä¢ V1 features auto-generated from category + question answers
‚Ä¢ Future features list for V2+ ideas (inform architecture, don't build)
‚Ä¢ Key decisions list for items to resolve before Session 1
‚Ä¢ Each feature has: title, description, priority, effort
‚Ä¢ Developer can add/edit/remove/reorder all features

STARTING STANDARDS:
‚Ä¢ 12 universal standards (always recommended): dark mode, CSS variables, mobile-first, toasts, etc.
‚Ä¢ 24 category-driven standards selected based on scoping answers
‚Ä¢ Reviewable checklist ‚Äî developer can toggle individual standards

AUTO-GENERATE WORK ITEMS:
‚Ä¢ V1 features ‚Üí work items (type: feature, status: ready, source: 'scoped')
‚Ä¢ Out-of-scope features ‚Üí work items (status: deferred)
‚Ä¢ Future features ‚Üí work items (status: idea, priority: nice-to-have)
‚Ä¢ Key decisions ‚Üí work items (type: research, status: ready)
‚Ä¢ Uses WorkItemService.createBatch() for single Firebase write

INTEGRATION POINTS:
‚Ä¢ BacklogView: "üéØ Scope Work" dropdown button with per-app scope initiation
‚Ä¢ SetupNewAppView: New Step 2 "Scope" between Define and Check Repos (5-step wizard now)
‚Ä¢ Quick setup option: skip scoping for simple/throwaway apps
‚Ä¢ Scope data stored at command-center/{uid}/appScopes/{appId} in Firebase

---

v8.22.0 ‚Äî 2026-02-09
--------------------
Orchestrator Phase 1.1: Backlog View + Work Item CRUD.

BACKLOG VIEW (NEW TOP-LEVEL NAV):
‚Ä¢ New üìã Backlog tab in main navigation (between Projects and Monitor)
‚Ä¢ Full work item CRUD: create, edit, delete
‚Ä¢ Status transitions: idea ‚Üí ready ‚Üí in-progress ‚Üí done ‚Üí deferred
‚Ä¢ Quick one-click status transition buttons on each item row
‚Ä¢ Group items by: app, status, type, or no grouping
‚Ä¢ Filter by: status (active/idea/ready/in-progress/done/deferred), type, app
‚Ä¢ Search by title, description, ID, or tags
‚Ä¢ Sort by: priority, status, effort, type, or creation date
‚Ä¢ Stats bar: clickable status counts for quick filtering
‚Ä¢ Bulk select + bulk status update (select multiple ‚Üí change status)
‚Ä¢ Empty state with guided first-item creation

WORK ITEM EDIT MODAL:
‚Ä¢ Full-featured modal for creating/editing work items
‚Ä¢ Fields: app selector, title, description, type (feature/bugfix/
  enhancement/chore/research), priority (core/nice-to-have/out-of-scope),
  status, effort (quick/session/multi-session/epic)
‚Ä¢ Acceptance criteria: add/remove with Enter key support
‚Ä¢ Tags: add/remove
‚Ä¢ Collapsible context section: files affected, sections, dependencies, notes

DASHBOARD INTEGRATION:
‚Ä¢ Work item count badges (üìã N) on app cards ‚Äî shows active items per app
‚Ä¢ Backlog summary widget ‚Äî 4-column status grid + recent active items
‚Ä¢ "View All ‚Üí" link navigates to Backlog view

WORKITEMSERVICE ENHANCEMENTS:
‚Ä¢ createBatch(uid, items) ‚Äî bulk create for future scoping flow
‚Ä¢ delete(uid, itemId) ‚Äî delete individual items
‚Ä¢ source field: manual | scoped | imported | promoted
‚Ä¢ Global subscription in App component (like globalIssues)

COPY FOR CLAUDE:
‚Ä¢ Each work item has a üìã copy action
‚Ä¢ Generates formatted markdown context with title, description,
  acceptance criteria, files affected, and notes
‚Ä¢ Ready to paste into Claude session or Claude Prep package

v8.21.1 ‚Äî 2026-02-09
--------------------
Orchestrator Phase 0.3: Engine Registry UI + Token Integration in Claude Prep.

AI ENGINES IN SETTINGS:
‚Ä¢ New "ü§ñ AI Engines" section in Settings view
‚Ä¢ Default engine selector ‚Äî dropdown with all 5 engines, persists to
  localStorage via EngineRegistryService.setDefault()
‚Ä¢ Engine comparison table ‚Äî shows name, tier (fast/balanced/flagship),
  context window, extended context, input cost, output cost, Projects
  support, and Skills support for all engines
‚Ä¢ Default engine row highlighted with indigo tint and ‚òÖ indicator
‚Ä¢ Expandable session type recommendations (build‚ÜíSonnet, design‚ÜíOpus, etc.)

TOKEN ESTIMATION IN CLAUDE PREP:
‚Ä¢ Every file in the package now includes a token count estimated via
  TokenRegistryService.estimateTokens() ‚Äî heuristic Tier 1 counting
‚Ä¢ Stats row shows üßÆ token count alongside üì¶ file count and üíæ size
‚Ä¢ File manifest table ‚Äî expandable <details> with File, Size, Tokens, %
  columns, sorted by token count descending; 50%+ files highlighted amber

CONTEXT BUDGET BAR:
‚Ä¢ Color-coded progress bar after package generation:
  - Green (‚â§50%) ‚Üí Emerald (‚â§75%) ‚Üí Amber (‚â§90%) ‚Üí Orange (‚â§100%) ‚Üí Red (over)
‚Ä¢ Shows engine name, tokens / usable limit, percentage
‚Ä¢ Usable limit = 80% of engine context window (20% reserved for reasoning)
‚Ä¢ Over-budget state shows specific recommendations:
  - Switch to extended context (if available on engine)
  - Use architecture summary instead of full source
  - Include only relevant code sections
  - Skip CHANGELOG.md
  - Switch to a larger-context engine

TOKEN COLUMN IN SESSION BRIEF:
‚Ä¢ The file manifest in SESSION_BRIEF.md now includes a Tokens column
  alongside File, Size, and Source columns

v8.20.0 ‚Äî 2026-02-09
--------------------
Orchestrator Phase 0.2: New data services and app lifecycle metadata.

NEW SERVICES:
‚Ä¢ WorkItemService ‚Äî Backlog work items with full CRUD, status transitions
  (idea ‚Üí ready ‚Üí in-progress ‚Üí done ‚Üí deferred), milestone filtering,
  and deploy close-the-loop (auto-complete work items on deploy)
‚Ä¢ SessionService ‚Äî Claude session tracking across the prep ‚Üí build ‚Üí
  deploy lifecycle. Links sessions to deploys and work items.
‚Ä¢ TokenRegistryService ‚Äî Heuristic token estimation for context budget
  management. Detects content type (code/markdown/prose/json) and applies
  empirical ratios. Caches results in localStorage.
‚Ä¢ EngineRegistryService ‚Äî AI engine profiles for Claude Sonnet/Haiku/Opus
  4.5, GPT-4.1, Gemini 2.5 Pro. Includes context windows, pricing,
  session type recommendations, budget checking with actionable
  recommendations when over budget.

APP LIFECYCLE:
‚Ä¢ Every app now has a `lifecycle` object: category, current maturity,
  maturity target, problem statement, target audience, user goal,
  success metric, tech stack, maturity criteria
‚Ä¢ AppEditModal has new tabbed interface: ‚öôÔ∏è General | üìä Lifecycle
‚Ä¢ Lifecycle tab: category dropdown, maturity selectors, problem/audience/
  goal/metric fields, visual maturity progress bar
‚Ä¢ Existing apps get empty lifecycle defaults (no data loss)

This is a pure-additive release. No existing behavior changed.

v8.19.0 ‚Äî 2026-02-09
--------------------
Phase 0.1: Data Service Layer Extraction

Orchestrator project foundation ‚Äî extracted all data access from
App() and views into service objects. Pure refactoring, zero
behavior change. All existing views work identically.

New service objects (inserted after FirebaseConfigSync):
- DeployService: deploy history CRUD (load/save/add/update/getForApp)
- SessionLogService: session log CRUD (load/save/addRecentEntry)
- IssueService: issues CRUD via Firebase (listen/create/update/
  updateStatus/linkToVersion/markReleasedToProd/getNextId)
- ReleaseService: release records via Firebase (listen/create)
- UserReportService: user-submitted reports listener
- RollbackService: rollback snapshot CRUD (load/save/get/set/clear)

What changed:
- All inline localStorage read/write for deploys, session log,
  rollback snapshots now goes through service objects
- All inline Firebase RTDB calls for issues/releases in IssuesView
  now go through IssueService/ReleaseService
- App() globalIssues listener uses IssueService.listen()
- App() linkIssuesToVersion uses IssueService.linkToVersion()
- Startup sync overlay uses service .overlay() methods
- Force sync and push-all use service .load() methods
- Health check and cleanup use DeployService.load()

Pattern followed: FirebaseConfigSync (localStorage + Firebase
dual-write, fire-and-forget async). Services are standalone
objects, not React components ‚Äî views still use React state
for rendering, services handle persistence.

v8.18.6 ‚Äî 2026-02-09
--------------------
Fix: Firebase overlay deleting local-only apps.

Overlay replaced entire apps object with Firebase data, wiping
apps that only existed locally (Quotle-info, SB Squares).

Overlay now merges local apps INTO Firebase data:
- Local-only apps preserved and pushed back to Firebase
- Local repos always authoritative
- Local versions preserved when Firebase has empty values
- Local-only projects preserved

v8.18.5 ‚Äî 2026-02-09
--------------------
Fix: Firebase overlay overwriting correct local repo names.

"Always overlay" from v8.18.4 caused Firebase's stale repo
names (managementprod) to overwrite local correct repos
(command-center). Overlay now preserves local repos as
authoritative ‚Äî local is source of truth for repo assignments,
Firebase is downstream.

Reverted migration timestamp hack ‚Äî restored ConfigManager.save()
in migration. Overlay repo preservation handles the conflict.

v8.18.4 ‚Äî 2026-02-09
--------------------
Fix: Firebase overlay blocked by migration timestamp bump.

ConfigManager.save() during cc_apps_v6 migration set a fresh
_updatedAt, making local config "newer" than Firebase. Overlay
skipped, hosted version never got repos from Firebase.

Two fixes:
1. Migration save no longer bumps _updatedAt (preserves
   existing timestamp so Firebase overlay can still win)
2. Removed timestamp comparison for Phase 1 ‚Äî always overlay
   Firebase config when it has data (single-user, no conflicts)

v8.18.3 ‚Äî 2026-02-09
--------------------
Fix: Firebase overlay was overwriting locally-migrated repos.

Root cause: startup overlay pulled Firebase config (empty repos)
and overlaid it onto local config (which had repos from
cc_apps_v6 migration), erasing the repo assignments.

Overlay now preserves locally-populated repos when Firebase
has empty strings, then pushes the corrected config back to
Firebase automatically. Also added diagnostic logging to
migrateFromOldFormat.

v8.18.2 ‚Äî 2026-02-09
--------------------
Fix: Auto-detected repos not synced to config/Firebase.

autoMapRepos() wrote testRepo/prodRepo to legacy apps state
(cc_apps_v6) but never back to config.apps[id].repos. This
meant Firebase config had empty repo strings, and the hosted
Dashboard filtered out apps without repos.

Now syncs detected repos back to config after auto-mapping,
so Push All includes correct repo assignments.

v8.18.1 ‚Äî 2026-02-09
--------------------
Fix: Apps missing project field after Firebase sync.

mergeWithDefaults() schema migration was missing the project
field, so apps synced from Firebase without it defaulted to
'other'. Dashboard showed all apps under "Other" project.

Added project backfill from DEFAULT_APP_DEFINITIONS seeds
during migration. Existing apps get their correct project
assignment restored automatically on load.

v8.18.0 ‚Äî 2026-02-09
--------------------
Firebase Sync Settings UI + Debounced Writes

New "Firebase Config Sync" section in Settings view with:
- Sync status display (synced/syncing/offline/error)
- Firebase data size with per-key breakdown
- Manual "Push All to Firebase" button (force overwrite)
- Manual "Pull All from Firebase" button (force overlay)
- "Clear Firebase Data" button (with confirmation)
- Last manual sync timestamp

Debounced writes: deploy history, session log, and deletion
history now use 2-second debounce window to prevent rapid-fire
writes to Firebase RTDB during batch deploy operations.

New FirebaseConfigSync methods: clearAll() removes all CC data
from Firebase, getDataSize() measures data per key.

v8.17.0 ‚Äî 2026-02-09
--------------------
Firebase Config Sync ‚Äî CC data now syncs to Firebase RTDB.

New FirebaseConfigSync class syncs non-sensitive configuration
data to Firebase at command-center/ path. localStorage remains
the instant-load cache; Firebase is the source of truth.

Dual-write: every save writes localStorage first (instant),
then fire-and-forget pushes to Firebase RTDB.

Startup overlay: loads localStorage immediately, pulls Firebase
async, overlays into state if Firebase data is newer. On first
run (Firebase empty), seeds Firebase with all local data.

Sync status indicator in header shows connection state:
‚òÅÔ∏è synced | üîÑ syncing | ‚ö° offline | ‚ö†Ô∏è error

Data synced: config (apps/projects/environments), deploy
history, rules history, session log, deletion history,
rollback snapshots.

Secrets stay local only: GitHub PAT, Firebase SA key, API keys,
collapsed projects (UI preference), Firebase UID (session).

Foundation for future multi-user access to CC configuration.

--- REMAINING WORK (next session) ---
- Firebase security rules for command-center/ path
- Settings UI: manual push/pull buttons, sync status details
- Sync conflict resolution UI (currently last-write-wins)
- Test with actual multi-device scenario

v8.16.7 ‚Äî 2026-02-09
--------------------
Google auth moved from Firebase page to header status bar.
Shows profile photo + first name when signed in, "Sign In"
when not. Click signed-in user to sign out. Greyed out when
running locally (HTTPS required).

v8.16.6 ‚Äî 2026-02-09
--------------------
Hide top "Scan Repositories" button when on Repo Reset tab
to avoid confusion between the two scan buttons.

v8.16.5 ‚Äî 2026-02-09
--------------------
Repo Reset reworked as bulk scanner. "Scan All Repos" checks
all recently-deployed apps (test + prod) at once. Results
grouped by app/repo. Select All + Delete handles files and
directories recursively. Auto re-scans after cleanup.

v8.16.4 ‚Äî 2026-02-09
--------------------
FIX: React Error #310 on Repo Reset tab. Extracted from IIFE
(useState hooks illegal there) into proper RepoResetPanel component.

v8.16.3 ‚Äî 2026-02-09
--------------------
FIX: "Running Locally" banner link was hardcoded to old
managementprod repo (404). Now dynamically reads prod repo URL
from command-center app config.

v8.16.2 ‚Äî 2026-02-09
--------------------
FIX: Health alert "Open Repo Reset" now lands on the Repo Reset
tab (was landing on Stale Files). Also dismisses the alert banner.

v8.16.1 ‚Äî 2026-02-09
--------------------
Health check now only scans apps deployed in the last 30 days.
Reads deployment history from localStorage to determine which
apps are active. Reduces API calls from ~40 to just the repos
you're actively using.

v8.16.0 ‚Äî 2026-02-09
--------------------
FEATURE: Daily Repo Health Check

On startup (after version refresh), CC now scans all app repos
for unexpected files ‚Äî runs once per 24 hours.

If issues found, an amber banner appears at the top of Dashboard:
  ‚ö†Ô∏è Repo Health Check ‚Äî 2 repos with unexpected files
  üèóÔ∏è Command Center (test) ‚Äî 3 unexpected: command-center/, docs/...
  üéÆ Game Shelf (prod) ‚Äî 1 unexpected: old-backup.html

Buttons:
- "Open Repo Reset" ‚Üí navigates to Cleanup ‚Üí Repo Reset tab
- "‚úï Dismiss" ‚Üí hides banner until next daily check

The check is lightweight (root-level listRepoContents only, no
recursive scan). The Repo Reset tool does the full recursive scan
when you want to see details and delete files.

v8.15.6 ‚Äî 2026-02-09
--------------------
FIX: HTML Deploy Path from Zip
FEATURE: Repo Reset Tool

Deploy fix: HTML files from zips with nested folders were deploying
to the wrong path (e.g. command-center/index.html instead of
index.html). Now HTML files always use filename-only as targetPath.
This also fixes promotion reading wrong versions from test repos.

Repo Reset: New tab in Cleanup view.
1. Select app + target (test/prod)
2. Scan ‚Äî fetches all repo contents recursively
3. Compares against expected structure:
   - Simple apps: index.html
   - PWA apps: index.html, sw.js, manifest.json, icons/
   - Prod repos also: doc files at root
   - Always expected: README.md, LICENSE, .gitignore, CNAME
4. Shows summary cards: expected / unexpected / total
5. Select All + delete unexpected files
6. Deletion log with per-file success/failure

v8.15.5 ‚Äî 2026-02-09
--------------------
FIX: setStagedFiles Scoping Error

Root cause of "Push 6 Docs" reappearing after deploy.

setStagedFiles was defined in App() but called inside DashboardView
(a child component) without being passed as a prop. The batch deploy
executeBatchAction pushed docs successfully to GitHub, but the
setStagedFiles call threw ReferenceError, leaving the docs in the
staged files list.

Fix: Pass setStagedFiles as prop from App to DashboardView.

v8.15.4 ‚Äî 2026-02-09
--------------------
UX: Drift Banner Auto-Collapse

Config drift banner is now a <details> element:
- Errors/warnings: auto-opens, red/orange styling, Copy Fix Prompt visible
- Info-only: collapsed one-liner with slate styling, click to expand
- Reduces visual noise for non-critical drift items

v8.15.3 ‚Äî 2026-02-09
--------------------
FIX: Doc Push Bugs

Bug 1: After pushing docs, the staged files weren't cleared,
causing the UI to show "Push 6 Docs" again and push them twice.
Now successfully pushed docs are removed from staged files.

Bug 2: Standalone repos (no subPath like CC) had docs pushed to
wrong paths like command-center/CONTEXT.md instead of CONTEXT.md.
The default docTargetPath now correctly uses just the fileName.

Both fixes applied to batch deploy controls AND Deploy All modal.

v8.15.2 ‚Äî 2026-02-09
--------------------
FIX: Seed Drift + Copy Buttons

Fixed 3 config ‚Üî code drift items detected by v8.15.1:
- Quotle icon: üìñ ‚Üí üí¨ (manifest + definitions)
- quotle-info project name: Quotle.info ‚Üí Quotle-info (manifest + seeds + definitions)
- Command Center appType: internal ‚Üí public (manifest + definitions)

Added üìã Copy button inside the expanded prompt text for both
doc validation and config drift banners.

v8.15.1 ‚Äî 2026-02-09
--------------------
FEATURE: Config ‚Üî Code Drift Detection

When deploying CC itself, the new version's seed values are compared
against the running config to detect mismatches.

How it works:
1. CC_SEED_MANIFEST is a JSON block embedded in index.html between
   /* CC_SEED_MANIFEST_START */ and /* CC_SEED_MANIFEST_END */ markers
2. detectConfigDrift() parses it from the staged file and diffs against
   the running config (localStorage)
3. Drifts are classified:
   - üî¥ Error: gs-app-id doesn't match any config app
   - ‚ö†Ô∏è Warn: project/app name, project assignment, etc. mismatch
   - ‚ÑπÔ∏è Info: apps/projects in config but not in code seeds

UI:
- Color-coded banner appears in staged files area (only on CC self-deploy)
- "Copy Fix Prompt" button copies detailed Claude prompt with all drifts
- Expandable prompt shows exactly what to tell Claude to fix

This ensures that when you edit app/project config in the CC UI,
you get alerted if the code's seed values don't match.

v8.15.0 ‚Äî 2026-02-09
--------------------
BREAKING: App Identity Rename (management ‚Üí command-center)

Command Center is now a standalone app with its own identity.
Previously it was "management" ‚Äî a sub-app under Game Shelf.

Changes:
- gs-app-id meta tag: "command-center" (was "management")
- Page title: "Command Center" (was "Game Shelf Command Center")
- DEFAULT_APP_DEFINITIONS key/id: "command-center"
- Fallback detection signature: "command-center"
- Default deploy target: "command-center"
- Repo-to-app-id mappings: both Smart Deploy + Claude Prep
- Internal tools list in Projects view
- Deploy instructions: references command-center-test repo

Migration:
- mergeWithDefaults() auto-renames "management" ‚Üí "command-center"
  in localStorage on first load of v8.15.0
- Old deployment history still displays correctly (read-only)

v8.14.2 ‚Äî 2026-02-09
--------------------
FIX: Deploy + Docs UX

- Batch deploy controls now show "Deploy 1 file + Push 6 docs" (was "Deploy 7 selected files")
- Doc files from zip now inherit the detected app from index.html
- Single button click deploys to GitHub Pages AND pushes docs to source repo
- Refactored batch action handler to eliminate code duplication

v8.14.1 ‚Äî 2026-02-09
--------------------
FEATURE: Doc Package Validation

When deploy + doc files are staged together, CC now validates:
1. Missing required docs (CONTEXT.md, PROJECT_PLAN.md, CHANGELOG.md, RELEASE_NOTES.txt)
2. CONTEXT.md version header matches deploy version
3. CHANGELOG.md latest [X.X.X] entry matches deploy version
4. RELEASE_NOTES.txt latest entry matches deploy version

UI:
- Amber "Doc Package Issues" banner above staged files with all issues listed
- Expandable "Show Claude fix prompt" with ready-to-paste text
- "Copy Fix Prompt" button for one-click copy
- Per-file green ‚úì or amber ‚ö†Ô∏è indicators on each doc card

The Claude fix prompt includes specific file names, expected versions,
and what action to take (create missing docs, update version references).

v8.14.0 ‚Äî 2026-02-09
--------------------
FEATURE: Unified Deploy + Push Docs

Drop a project zip (e.g. cc-project-v8_14_0.zip) and CC automatically:
- Routes index.html/sw.js/manifest.json ‚Üí deploy to GitHub Pages
- Routes CONTEXT.md/CHANGELOG.md/etc ‚Üí push to source repo
- SESSION_BRIEF.md auto-skipped (it's auto-generated)

New in staged files:
- Doc files (.md, .txt) show cyan "Push to repo:" label
- Deploy files show normal "Deploy as:" label
- Both types selectable/deselectable individually

Deploy All modal:
- Files grouped into "Deploy to GitHub Pages" and "Push docs to repo" sections
- Adaptive button text: "Deploy 1 + Push 6 Docs"
- Docs pushed via GitHub API with SHA check for updates vs creates

Also: file input now accepts .md and .txt files, drop zone hint updated.

v8.13.2.0 ‚Äî 2026-02-09
--------------------
ARCHITECTURE: Config as Source of Truth

mergeWithDefaults() overhaul:
- Seed data (DEFAULT_APP_DEFINITIONS, SEED_PROJECTS) now only used for first-time init
- Stored config.apps and config.projects are authoritative after first load
- No more force-merging defaults into existing stored data on every load
- Schema migration only: ensures structural fields exist without overwriting values

Removed DEFAULT_APP_DEFINITIONS runtime fallbacks:
- 8 subPath fallback references removed (deploy, Smart Deploy, version check, Projects)
- PWA detection now reads from config.apps instead of hardcoded defaults
- targetPath lookup now reads from config.apps
- repoPatterns for auto-env-selection now reads from config.apps
- appWithDefaults spread removed from deploy function

This prevents hardcoded seed values from overriding user customizations
(e.g., Command Center project assignment reverting to Game Shelf on reload).

v8.13.1.7 ‚Äî 2026-02-09
--------------------
CHANGE: Command Center Project Independence
- Added "Command Center" project to SEED_PROJECTS (üèóÔ∏è, cyan)
- Updated management app default: project 'command-center' (was 'gameshelf')
- Updated repoPatterns: command-center / command-center-test (was management-prod)
- Added repos.test to management app definition
- Icon updated from üéõÔ∏è to üèóÔ∏è to match user config

v8.13.1.6 ‚Äî 2026-02-09
--------------------
FIX: Version Scanner False Positives on CC Self-Deploy
- Extracted SEED_VERSION constant for new app scaffolding (generateInitialHTML, generateAdminHTML)
  Previously hardcoded "0.1.0" in template HTML triggered "Version Issues Detected"
- Enhanced shouldSkip() in findAllVersionStrings():
  - Detects meta version tags inside generate*() functions (1000-char lookback)
  - Skips placeholder patterns (X.X.X, X.Y.Z) as non-version strings
- CC now deploys cleanly with single version (8.13.1.6) detected

v8.13.1.5 ‚Äî 2026-02-07
--------------------
FEATURE: Push Docs to Repo + Detection Improvements

Push Docs (v8.13.1.0-1.3):
- New "Push Docs to Repo" feature in Claude Prep modal
- Drop .md/.txt files or .zip packages ‚Äî extracts docs automatically
- Checks repo for existing files (update vs create), pushes via GitHub API
- Clear progress states: staging ‚Üí animated pushing ‚Üí completion/error banner
- Zip support: drops a project zip, all docs extracted and deduplicated

Extra Docs Scanning (v8.13.1.4):
- Claude Prep now scans repo for additional .md files beyond the standard 4
- Follows CLAUDE-PREP-STANDARD: extras included when present in repo

App Configuration (v8.13.0.4-0.8):
- Sub Path field in app edit modal for subdirectory apps
- Repository Assignment dropdowns ‚Äî select from real repos instead of typing
- Repos grouped as Shared (with app labels) vs Available
- Projects promoted to main navigation (5 tabs)
- Emoji picker on both App and Project edit modals
- Auto-generated detection patterns from app name
- Dynamic app detection ‚Äî configurable patterns scored by specificity

v8.13.0 ‚Äî 2025-02-07
--------------------
FEATURE: Claude Prep (Session Prep per App)
- New ü§ñ button on each app row in Projects & Apps view
- Click to generate a context package for starting a Claude session:
  - Fetches source files from GitHub repo (index.html + sw.js/manifest.json for PWAs)
  - Fetches project docs (CONTEXT.md, PROJECT_PLAN.md, CHANGELOG.md, RELEASE_NOTES.txt, ARCHITECTURE.md)
  - Generates SESSION_BRIEF.md with current versions, recent deploys, open issues
  - Packages everything into a downloadable zip
- Smart doc detection: standalone repos check root, consolidated repos check {subPath}/docs/
- Bootstrap mode: generates skeleton doc templates when docs don't exist yet
- Progress modal with real-time log, file manifest, and download button

v8.12.0 ‚Äî 2025-02-07
--------------------
FEATURE: Projects as Stored Data (Priority 1)
- Projects promoted from hardcoded constant to stored objects in config
- New ProjectEditModal: create, edit, delete projects
  - Name, icon (emoji or gs-logo), color picker (7 themes), description, sort order
  - Delete with app reassignment to Other project
- "_standalone" concept removed, replaced with "Other" project
- New Project button in ProjectsTab header
- Edit button (‚úèÔ∏è) on each project card
- Project state (active/hidden) now stored in config instead of separate localStorage
- All project dropdowns (AppEditModal, SetupNewAppView) read from config
- Auto-migration: seeds projects from SEED_PROJECTS on first load,
  migrates _standalone ‚Üí other, migrates cc_projectStates into config

v8.11.0 ‚Äî 2025-02-07
--------------------
FEATURE: Functions Dashboard (Phase 3)
- New "Functions" tab in Monitor ‚Üí Firebase
- Summary cards: active/total functions, 24h error count, last deploy time
- Functions table: name, status badge (ACTIVE/green, deploying/amber, error/red),
  runtime, memory, 24h error count, last deploy time
- Health ping: POST to each function's HTTPS endpoint, reports status + response time
  - 4xx = healthy (auth error but function is alive), 5xx = broken
  - Ping All button tests every function sequentially
- Error counts fetched from Cloud Logging API grouped by function name

FEATURE: Log Viewer (Phase 3)
- New "Logs" tab in Monitor ‚Üí Firebase
- Filters: severity level, function name, free-text search, page size (25-200)
- Auto-refresh toggle with 30-second interval
- Severity summary bar with clickable counts for quick filtering
- Color-coded log entries: timestamp, severity badge, function name, payload
- Click any function name in a log entry to filter to that function
- Supports both textPayload and jsonPayload formats
- Error/Critical entries highlighted with red background

REFACTOR: FirebaseView now has 4 tabs
- Data Browser | Rules | Functions | Logs

v8.10.0 ‚Äî 2025-02-07
--------------------
FEATURE: Firebase Security Rules Manager (Phase 2)
- New Rules tab in Monitor ‚Üí Firebase (alongside existing Data Browser)
- Fetch and display current RTDB security rules as formatted JSON
- Size and line count stats displayed on rules viewer
- Inline editor with Tab key support and real-time JSON validation
- Format/prettify button to clean up edited JSON
- Deploy rules to Firebase with confirmation dialog
  - Shows path count, warns about overwrite
  - Automatically snapshots current rules before deploying
- Rules history stored in localStorage (cc_rulesHistory, last 20 snapshots)
- Manual snapshot button to save current state without deploying
- Snapshot viewer with raw JSON display
- Line-by-line diff view: compare any snapshot against current live rules
- Restore from snapshot: loads into editor, requires explicit Deploy to push
- Delete individual snapshots from history
- Graceful handling when service account not configured (shows setup prompt)

REFACTOR: FirebaseView tabbed layout
- FirebaseView now has two tabs: Data Browser | Rules
- FirebaseDataBrowser extracted from original FirebaseView (no functionality changes)
- Tab switching preserves state within each tab

v8.9.0 ‚Äî 2025-02-07
--------------------
FEATURE: Firebase Admin Token Management (Phase 1)
- New FirebaseAdmin class for Google OAuth2 service account authentication
- Service account JSON key stored in localStorage (cc_firebase_sa)
- JWT signing using browser-native Web Crypto API (RS256 / RSASSA-PKCS1-v1_5)
- Signed JWT exchanged for Google OAuth2 access token (1-hour lifetime)
- Token cached in memory with automatic 55-minute refresh window
- Admin API methods ready for Phase 2-3:
  - getRules() / putRules() ‚Äî Read/deploy RTDB security rules
  - listFunctions() ‚Äî List Cloud Functions and status
  - getLogs() ‚Äî Query Cloud Logging entries
  - testConnection() ‚Äî 3-point validation (token, rules, functions)

UI: Firebase Admin Settings (in Configure ‚Üí Settings)
- Paste service account JSON key with validation (checks type, required fields, key format)
- Status display: service account email, project ID, key ID, token state
- Token state indicator: active (green), expired (amber), not yet requested (grey)
- Test Connection: validates OAuth2 token exchange, RTDB rules access, Cloud Functions API
- Refresh Token: force new token (useful after scope/permission changes)
- Update Key: replace existing service account key
- Remove: clear service account from localStorage

INFRASTRUCTURE:
- Global firebaseAdmin singleton instance available to all components
- No external dependencies ‚Äî all crypto handled by browser SubtleCrypto
- Base64url encoding for JWT components
- PEM key parsing (handles both RSA PRIVATE KEY and PRIVATE KEY formats)

DOCS: Design Decisions Documented (discussed but not yet implemented)
- Priority 1: Projects as stored data ‚Äî promote DEFAULT_PROJECTS to cc_config_v3.projects
  with ConfigManager migration and Project Edit Modal (create/edit/delete)
- Priority 2: App creation consolidation ‚Äî merge Setup New App wizard into Projects view,
  remove standalone nav entry, pre-fill project context on "Add App"
- Priority 3: Firebase-per-app metadata ‚Äî new firebasePaths field on app definitions
  to formally link apps with their Firebase RTDB paths
- Firebase capabilities gap analysis ‚Äî documented what FirebaseView has vs what's missing
  (rules editor, functions dashboard, schema map, per-app paths, multi-project support)

v8.8.0 ‚Äî 2025-02-07
--------------------
FEATURE: Project Layer
- Added project-based grouping for all apps (replaces Public/Internal/Other categories)
- 5 default projects: Game Shelf, Quotle.info, LabelKeeper, Super Bowl, Standalone
- Dashboard: collapsible project cards with color-coded borders, auto-expand on active deploy
- New standalone Projects view (Configure ‚Üí Projects) replaces old Apps view
- Timestamp tracking (createdAt/updatedAt) on all apps
- SB Squares app added under Super Bowl project

FEATURE: Setup New App Wizard
- 4-step wizard: define ‚Üí check repos ‚Üí create ‚Üí Claude prompt

v8.7.7 ‚Äî 2025-02-07
--------------------
FEATURE: Quotle.info Integration
- Added quotle-info and quotle-info-admin app definitions

v8.7.6 ‚Äî prior
--------------------
(See previous release notes for earlier versions)
