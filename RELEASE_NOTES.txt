Command Center ‚Äî Release Notes
================================

v8.13.1.5 ‚Äî 2026-02-07
--------------------
FEATURE: Push Docs to Repo + Detection Improvements

Push Docs (v8.13.1.0-1.3):
- New "Push Docs to Repo" feature in Claude Prep modal
- Drop .md/.txt files or .zip packages ‚Äî extracts docs automatically
- Checks repo for existing files (update vs create), pushes via GitHub API
- Clear progress states: staging ‚Üí animated pushing ‚Üí completion/error banner
- Zip support: drops a project zip, all docs extracted and deduplicated

Extra Docs Scanning (v8.13.1.4):
- Claude Prep now scans repo for additional .md files beyond the standard 4
- Follows CLAUDE-PREP-STANDARD: extras included when present in repo

App Configuration (v8.13.0.4-0.8):
- Sub Path field in app edit modal for subdirectory apps
- Repository Assignment dropdowns ‚Äî select from real repos instead of typing
- Repos grouped as Shared (with app labels) vs Available
- Projects promoted to main navigation (5 tabs)
- Emoji picker on both App and Project edit modals
- Auto-generated detection patterns from app name
- Dynamic app detection ‚Äî configurable patterns scored by specificity

v8.13.0 ‚Äî 2025-02-07
--------------------
FEATURE: Claude Prep (Session Prep per App)
- New ü§ñ button on each app row in Projects & Apps view
- Click to generate a context package for starting a Claude session:
  - Fetches source files from GitHub repo (index.html + sw.js/manifest.json for PWAs)
  - Fetches project docs (CONTEXT.md, PROJECT_PLAN.md, CHANGELOG.md, RELEASE_NOTES.txt, ARCHITECTURE.md)
  - Generates SESSION_BRIEF.md with current versions, recent deploys, open issues
  - Packages everything into a downloadable zip
- Smart doc detection: standalone repos check root, consolidated repos check {subPath}/docs/
- Bootstrap mode: generates skeleton doc templates when docs don't exist yet
- Progress modal with real-time log, file manifest, and download button

v8.12.0 ‚Äî 2025-02-07
--------------------
FEATURE: Projects as Stored Data (Priority 1)
- Projects promoted from hardcoded constant to stored objects in config
- New ProjectEditModal: create, edit, delete projects
  - Name, icon (emoji or gs-logo), color picker (7 themes), description, sort order
  - Delete with app reassignment to Other project
- "_standalone" concept removed, replaced with "Other" project
- New Project button in ProjectsTab header
- Edit button (‚úèÔ∏è) on each project card
- Project state (active/hidden) now stored in config instead of separate localStorage
- All project dropdowns (AppEditModal, SetupNewAppView) read from config
- Auto-migration: seeds projects from SEED_PROJECTS on first load,
  migrates _standalone ‚Üí other, migrates cc_projectStates into config

v8.11.0 ‚Äî 2025-02-07
--------------------
FEATURE: Functions Dashboard (Phase 3)
- New "Functions" tab in Monitor ‚Üí Firebase
- Summary cards: active/total functions, 24h error count, last deploy time
- Functions table: name, status badge (ACTIVE/green, deploying/amber, error/red),
  runtime, memory, 24h error count, last deploy time
- Health ping: POST to each function's HTTPS endpoint, reports status + response time
  - 4xx = healthy (auth error but function is alive), 5xx = broken
  - Ping All button tests every function sequentially
- Error counts fetched from Cloud Logging API grouped by function name

FEATURE: Log Viewer (Phase 3)
- New "Logs" tab in Monitor ‚Üí Firebase
- Filters: severity level, function name, free-text search, page size (25-200)
- Auto-refresh toggle with 30-second interval
- Severity summary bar with clickable counts for quick filtering
- Color-coded log entries: timestamp, severity badge, function name, payload
- Click any function name in a log entry to filter to that function
- Supports both textPayload and jsonPayload formats
- Error/Critical entries highlighted with red background

REFACTOR: FirebaseView now has 4 tabs
- Data Browser | Rules | Functions | Logs

v8.10.0 ‚Äî 2025-02-07
--------------------
FEATURE: Firebase Security Rules Manager (Phase 2)
- New Rules tab in Monitor ‚Üí Firebase (alongside existing Data Browser)
- Fetch and display current RTDB security rules as formatted JSON
- Size and line count stats displayed on rules viewer
- Inline editor with Tab key support and real-time JSON validation
- Format/prettify button to clean up edited JSON
- Deploy rules to Firebase with confirmation dialog
  - Shows path count, warns about overwrite
  - Automatically snapshots current rules before deploying
- Rules history stored in localStorage (cc_rulesHistory, last 20 snapshots)
- Manual snapshot button to save current state without deploying
- Snapshot viewer with raw JSON display
- Line-by-line diff view: compare any snapshot against current live rules
- Restore from snapshot: loads into editor, requires explicit Deploy to push
- Delete individual snapshots from history
- Graceful handling when service account not configured (shows setup prompt)

REFACTOR: FirebaseView tabbed layout
- FirebaseView now has two tabs: Data Browser | Rules
- FirebaseDataBrowser extracted from original FirebaseView (no functionality changes)
- Tab switching preserves state within each tab

v8.9.0 ‚Äî 2025-02-07
--------------------
FEATURE: Firebase Admin Token Management (Phase 1)
- New FirebaseAdmin class for Google OAuth2 service account authentication
- Service account JSON key stored in localStorage (cc_firebase_sa)
- JWT signing using browser-native Web Crypto API (RS256 / RSASSA-PKCS1-v1_5)
- Signed JWT exchanged for Google OAuth2 access token (1-hour lifetime)
- Token cached in memory with automatic 55-minute refresh window
- Admin API methods ready for Phase 2-3:
  - getRules() / putRules() ‚Äî Read/deploy RTDB security rules
  - listFunctions() ‚Äî List Cloud Functions and status
  - getLogs() ‚Äî Query Cloud Logging entries
  - testConnection() ‚Äî 3-point validation (token, rules, functions)

UI: Firebase Admin Settings (in Configure ‚Üí Settings)
- Paste service account JSON key with validation (checks type, required fields, key format)
- Status display: service account email, project ID, key ID, token state
- Token state indicator: active (green), expired (amber), not yet requested (grey)
- Test Connection: validates OAuth2 token exchange, RTDB rules access, Cloud Functions API
- Refresh Token: force new token (useful after scope/permission changes)
- Update Key: replace existing service account key
- Remove: clear service account from localStorage

INFRASTRUCTURE:
- Global firebaseAdmin singleton instance available to all components
- No external dependencies ‚Äî all crypto handled by browser SubtleCrypto
- Base64url encoding for JWT components
- PEM key parsing (handles both RSA PRIVATE KEY and PRIVATE KEY formats)

DOCS: Design Decisions Documented (discussed but not yet implemented)
- Priority 1: Projects as stored data ‚Äî promote DEFAULT_PROJECTS to cc_config_v3.projects
  with ConfigManager migration and Project Edit Modal (create/edit/delete)
- Priority 2: App creation consolidation ‚Äî merge Setup New App wizard into Projects view,
  remove standalone nav entry, pre-fill project context on "Add App"
- Priority 3: Firebase-per-app metadata ‚Äî new firebasePaths field on app definitions
  to formally link apps with their Firebase RTDB paths
- Firebase capabilities gap analysis ‚Äî documented what FirebaseView has vs what's missing
  (rules editor, functions dashboard, schema map, per-app paths, multi-project support)

v8.8.0 ‚Äî 2025-02-07
--------------------
FEATURE: Project Layer
- Added project-based grouping for all apps (replaces Public/Internal/Other categories)
- 5 default projects: Game Shelf, Quotle.info, LabelKeeper, Super Bowl, Standalone
- Dashboard: collapsible project cards with color-coded borders, auto-expand on active deploy
- New standalone Projects view (Configure ‚Üí Projects) replaces old Apps view
- Timestamp tracking (createdAt/updatedAt) on all apps
- SB Squares app added under Super Bowl project

FEATURE: Setup New App Wizard
- 4-step wizard: define ‚Üí check repos ‚Üí create ‚Üí Claude prompt

v8.7.7 ‚Äî 2025-02-07
--------------------
FEATURE: Quotle.info Integration
- Added quotle-info and quotle-info-admin app definitions

v8.7.6 ‚Äî prior
--------------------
(See previous release notes for earlier versions)
